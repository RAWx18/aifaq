

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>peer node &mdash; Hyperledger Fabric Docs main documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=c3038dac" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a8da1a53"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="osnadmin channel" href="osnadminchannel.html" />
    <link rel="prev" title="peer version" href="peerversion.html" /> 
<script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="hyperledger-fabric" /><meta name="readthedocs-version-slug" content="release-2.5" /><meta name="readthedocs-resolver-filename" content="/commands/peernode.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


          
          
          <a href="../index.html" class="icon icon-home">
            Hyperledger Fabric Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://discord.com/invite/hyperledger"><img style="padding: 0px; margin: auto auto auto auto;" alt="Discord" src="../_static/images/discord_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatis.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s new in Hyperledger Fabric v2.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#release-notes">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started - Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started_run_fabric.html">Getting Started - Run Fabric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_guide_overview.html">Deploying a production network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">Operations Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">Upgrading to the latest release</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../command_ref.html">Commands Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="peercommand.html">peer</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerchaincode.html">peer chaincode</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerlifecycle.html">peer lifecycle chaincode</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerchannel.html">peer channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="peersnapshot.html">peer snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="peerversion.html">peer version</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">peer node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-pause">peer node pause</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-rebuild-dbs">peer node rebuild-dbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-reset">peer node reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-resume">peer node resume</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-rollback">peer node rollback</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-start">peer node start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-unjoin">peer node unjoin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peer-node-upgrade-dbs">peer node upgrade-dbs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-usage">Example Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-pause-example">peer node pause example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-rebuild-dbs-example">peer node rebuild-dbs example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-reset-example">peer node reset example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-resume-example">peer node resume example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-rollback-example">peer node rollback example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-start-example">peer node start example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-unjoin-example">peer node unjoin example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peer-node-upgrade-dbs-example">peer node upgrade-dbs example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="osnadminchannel.html">osnadmin channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="configtxgen.html">configtxgen</a></li>
<li class="toctree-l2"><a class="reference internal" href="configtxlator.html">configtxlator</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryptogen.html">cryptogen</a></li>
<li class="toctree-l2"><a class="reference internal" href="ledgerutil.html">ledgerutil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../discovery-cli.html">Service Discovery CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="fabric-ca-commands.html">Fabric-CA Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributions Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">Still Have Questions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">Status</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Hyperledger Fabric Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../command_ref.html">Commands Reference</a></li>
      <li class="breadcrumb-item active">peer node</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/commands/peernode.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <!---
 File generated by help_docs.sh. DO NOT EDIT.
 Please make changes to preamble and postscript wrappers as appropriate.
 --->
<section id="peer-node">
<h1>peer node<a class="headerlink" href="#peer-node" title="Link to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command allows an administrator to start a peer node,
pause and resume a channel, rebuild databases, reset all channels in a peer to the genesis block,
rollback a channel to a given block number, and upgrade the database format.</p>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command has the following subcommands:</p>
<ul class="simple">
<li><p>pause</p></li>
<li><p>rebuild-dbs</p></li>
<li><p>reset</p></li>
<li><p>resume</p></li>
<li><p>rollback</p></li>
<li><p>start</p></li>
<li><p>unjoin</p></li>
<li><p>upgrade-dbs</p></li>
</ul>
</section>
<section id="peer-node-pause">
<h2>peer node pause<a class="headerlink" href="#peer-node-pause" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pauses</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">pause</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="k">for</span> <span class="n">the</span> <span class="n">paused</span> <span class="n">channel</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">pause</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">pause</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">pause</span>
</pre></div>
</div>
</section>
<section id="peer-node-rebuild-dbs">
<h2>peer node rebuild-dbs<a class="headerlink" href="#peer-node-rebuild-dbs" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Drops</span> <span class="n">the</span> <span class="n">databases</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">channels</span> <span class="ow">and</span> <span class="n">rebuilds</span> <span class="n">them</span> <span class="n">upon</span> <span class="n">peer</span> <span class="n">restart</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
</section>
<section id="peer-node-reset">
<h2>peer node reset<a class="headerlink" href="#peer-node-reset" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Resets</span> <span class="nb">all</span> <span class="n">channels</span> <span class="n">to</span> <span class="n">the</span> <span class="n">genesis</span> <span class="n">block</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">reset</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="n">starting</span> <span class="k">with</span> <span class="n">block</span> <span class="n">number</span> <span class="n">one</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">reset</span>
</pre></div>
</div>
</section>
<section id="peer-node-resume">
<h2>peer node resume<a class="headerlink" href="#peer-node-resume" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Resumes</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">resume</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="k">for</span> <span class="n">the</span> <span class="n">resumed</span> <span class="n">channel</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">resume</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">resume</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">resume</span>
</pre></div>
</div>
</section>
<section id="peer-node-rollback">
<h2>peer node rollback<a class="headerlink" href="#peer-node-rollback" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Rolls</span> <span class="n">back</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">to</span> <span class="n">a</span> <span class="n">specified</span> <span class="n">block</span> <span class="n">number</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">which</span> <span class="n">got</span> <span class="n">removed</span> <span class="n">during</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="o">--</span><span class="n">blockNumber</span> <span class="n">uint</span>   <span class="n">Block</span> <span class="n">number</span> <span class="n">to</span> <span class="n">which</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">rolled</span> <span class="n">back</span> <span class="n">to</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">rollback</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">rollback</span>
</pre></div>
</div>
</section>
<section id="peer-node-start">
<h2>peer node start<a class="headerlink" href="#peer-node-start" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Starts</span> <span class="n">a</span> <span class="n">node</span> <span class="n">that</span> <span class="n">interacts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">network</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                <span class="n">help</span> <span class="k">for</span> <span class="n">start</span>
      <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>   <span class="n">start</span> <span class="n">peer</span> <span class="ow">in</span> <span class="n">chaincode</span> <span class="n">development</span> <span class="n">mode</span>
</pre></div>
</div>
</section>
<section id="peer-node-unjoin">
<h2>peer node unjoin<a class="headerlink" href="#peer-node-unjoin" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unjoin</span> <span class="n">the</span> <span class="n">peer</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">channel</span><span class="o">.</span>  <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">unjoin</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">unjoin</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">unjoin</span>
</pre></div>
</div>
</section>
<section id="peer-node-upgrade-dbs">
<h2>peer node upgrade-dbs<a class="headerlink" href="#peer-node-upgrade-dbs" title="Link to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Upgrades</span> <span class="n">databases</span> <span class="n">by</span> <span class="n">directly</span> <span class="n">updating</span> <span class="n">the</span> <span class="n">database</span> <span class="nb">format</span> <span class="ow">or</span> <span class="n">dropping</span> <span class="n">the</span> <span class="n">databases</span><span class="o">.</span> <span class="n">Dropped</span> <span class="n">databases</span> <span class="n">will</span> <span class="n">be</span> <span class="n">rebuilt</span> <span class="k">with</span> <span class="n">new</span> <span class="nb">format</span> <span class="n">upon</span> <span class="n">peer</span> <span class="n">restart</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
</section>
<section id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Link to this heading">¶</a></h2>
<section id="peer-node-pause-example">
<h3>peer node pause example<a class="headerlink" href="#peer-node-pause-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">pause</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span>
</pre></div>
</div>
<p>pauses a channel on the peer. When the peer starts after pause, the paused channel will not be started
and the peer will not receive blocks for the paused channel.</p>
</section>
<section id="peer-node-rebuild-dbs-example">
<h3>peer node rebuild-dbs example<a class="headerlink" href="#peer-node-rebuild-dbs-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
<p>drops the databases for all the channels. When the peer is started after running this command, the peer will
retrieve the blocks stored on the peer and rebuild the dropped databases for all the channels.</p>
</section>
<section id="peer-node-reset-example">
<h3>peer node reset example<a class="headerlink" href="#peer-node-reset-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span>
</pre></div>
</div>
<p>resets all channels in the peer to the genesis block, i.e., the first block in the channel. The command also records the pre-reset height of each channel in the file system. Note that the peer process should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the reset. When the peer is started after performing the reset, the peer will fetch the blocks for each channel which were removed by the reset command (either from other peers or orderers) and commit the blocks up to the pre-reset height. Until all channels reach the pre-reset height, the peer will not endorse any transactions.</p>
</section>
<section id="peer-node-resume-example">
<h3>peer node resume example<a class="headerlink" href="#peer-node-resume-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">resume</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span>
</pre></div>
</div>
<p>resumes a channel on the peer. When the peer starts after resume, the resumed channel will be started
and the peer will receive blocks for the resumed channel.</p>
</section>
<section id="peer-node-rollback-example">
<h3>peer node rollback example<a class="headerlink" href="#peer-node-rollback-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span> <span class="o">-</span><span class="n">b</span> <span class="mi">150</span>
</pre></div>
</div>
<p>rolls back the channel ch1 to block number 150. The command also records the pre-rolled back height of channel ch1 in the file system. Note that the peer should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the rollback. When the peer is started after performing the rollback, the peer will fetch the blocks for channel ch1 which were removed by the rollback command (either from other peers or orderers) and commit the blocks up to the pre-rolled back height. Until the channel ch1 reaches the pre-rolled back height, the peer will not endorse any transaction for any channel.</p>
</section>
<section id="peer-node-start-example">
<h3>peer node start example<a class="headerlink" href="#peer-node-start-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>
</pre></div>
</div>
<p>starts a peer node in chaincode development mode. Normally chaincode containers are started
and maintained by peer. However in chaincode development mode, chaincode is built and started by the user. This mode is useful during chaincode development phase for iterative development.</p>
</section>
<section id="peer-node-unjoin-example">
<h3>peer node unjoin example<a class="headerlink" href="#peer-node-unjoin-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">unjoin</span> <span class="o">-</span><span class="n">c</span> <span class="n">mychannel</span>
</pre></div>
</div>
<p>unjoins the peer from channel <code class="docutils literal notranslate"><span class="pre">mychannel</span></code>, removing all content from the ledger and transient storage.  When unjoining a channel, the peer must be shut down.</p>
</section>
<section id="peer-node-upgrade-dbs-example">
<h3>peer node upgrade-dbs example<a class="headerlink" href="#peer-node-upgrade-dbs-example" title="Link to this heading">¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
<p>checks the data format in the databases for all the channels and drops databases if data format is in the previous version.
The command will return an error if the data format is already up to date. When the peer is started after running this command,
the peer will retrieve the blocks stored on the peer and rebuild the dropped databases in the new format.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="osnadminchannel.html" class="btn btn-neutral float-right" title="osnadmin channel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="peerversion.html" class="btn btn-neutral" title="peer version" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020-2023.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>